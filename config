# i3 config file (v4)
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

#{{{ General settings
# Mod3 remap to Caps_lock using xmodmap ~/.config/i3/Xmodmaprc
# reset setxkbmap -layout us
set $alt Mod1
set $mod Mod4
set $SCRIPTDIR $HOME/.config/i3/i3scripts

#Font for window titles
#font pango:DejaVu Sans Mono 8
font pango:WenQuanYi Micro Hei Mono 10
# Window borders
new_window pixel 1
new_float normal
gaps inner 0
hide_edge_borders none

# Color settings        Border_top  Background  Text        Indicator  Border
client.focused          #6699CC     #6699CC     #1B2B34     #5FB3B3    #6699CC
client.focused_inactive #6B7B84     #6B7B84     #1B2B34     #65737E    #6B7B84
client.unfocused        #6B7B84     #6B7B84     #1B2B34     #65737E    #6B7B84
client.urgent           #FAC863     #FAC863     #000000     #CDD3DE    #FAC863

# Urgency handling
focus_on_window_activation focus
force_display_urgency_hint 200 ms


# Do not follow the mouse
focus_follows_mouse yes

# Floating stuff
# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod
floating_minimum_size 640x360
floating_maximum_size 1920x1080

# Workspace names
#Â£πË≤≥ÂèÑËÇÜ‰ºçÈô∏ÊüíÊçåÁéñÊãæ‰Ω∞‰ªüËê¨ÂÑÑ
set $ws0 "Èõ∂"
set $ws1 "Â£π"
set $ws2 "Ë≤≥"
set $ws3 "ÂèÑ"
set $ws4 "ËÇÜ"
set $ws5 "‰ºç"
set $ws6 "Èô∏"
set $ws7 "Êüí"
set $ws8 "Êçå"
set $ws9 "Áéñ"
#set $ws0 "‚òØ‚Üí ÔÖº"
#set $ws1 "‚ù∂‚Üí ÔÑ†"
#set $ws2 "‚ù∑‚Üí üêÇ"
#set $ws3 "‚ù∏‚Üí ÔÇ¨"
#set $ws4 "‚ùπ‚Üí üíé"
#set $ws5 "‚ù∫‚Üí Ôàõ"
#set $ws6 "‚ùª‚Üí ÔÜà"
#set $ws7 "‚ùº‚Üí ÔÉÉ"
#set $ws8 "‚ùΩ‚Üí ÔÜ≥"
#set $ws9 "‚ùæ‚Üí üìß"
#set $ws10 "‚ùø‚Üí ‚òò"
#set $ws11 "Ôâ¨‚Üí ÔÄ¢ÔÜæ"
#set $ws12 "Ôáê‚Üí Ôá™"
#Ôâ©"
# Ôâ∞ ÓòÜ Óûë Óâ± ‚úâ üí©
# }}}

# General keybindings {{{

# start a terminal
bindsym $mod+Return exec xterm-tabbed.sh

# Moving windows
bindsym $mod+h move left
bindsym $mod+l move right
bindsym $mod+j move down
bindsym $mod+k move up
bindsym $alt+space move position mouse

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Window stuff
# kill focused window
bindsym $mod+Shift+q kill
# toggle border
bindsym $mod+b exec i3-msg border toggle

# Change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+p layout toggle split
bindsym $mod+d layout default
bindsym $mod+a layout toggle all
# Toggle tiling / floating
bindsym $mod+f floating toggle
# enter fullscreen mode for the focused container
bindsym $mod+x fullscreen toggle
# Change focus between tiling / floating windows
bindsym $mod+m focus mode_toggle

# Move window to scratchpad
bindsym $mod+Shift+minus move scratchpad, mode "default"
# Get the scratchpad window
bindsym $mod+minus scratchpad show, mode "default"

# Workspace handling {{{
  # switch to workspace
  bindsym $mod+1 workspace $ws1
  bindsym $mod+2 workspace $ws2
  bindsym $mod+3 workspace $ws3
  bindsym $mod+4 workspace $ws4
  bindsym $mod+5 workspace $ws5
  bindsym $mod+6 workspace $ws6
  bindsym $mod+7 workspace $ws7
  bindsym $mod+8 workspace $ws8
  bindsym $mod+9 workspace $ws9
  bindsym $mod+0 workspace $ws0

  # move focused container to workspace
  bindsym $mod+Shift+1 move container to workspace $ws1
  bindsym $mod+Shift+2 move container to workspace $ws2
  bindsym $mod+Shift+3 move container to workspace $ws3
  bindsym $mod+Shift+4 move container to workspace $ws4
  bindsym $mod+Shift+5 move container to workspace $ws5
  bindsym $mod+Shift+6 move container to workspace $ws6
  bindsym $mod+Shift+7 move container to workspace $ws7
  bindsym $mod+Shift+8 move container to workspace $ws8
  bindsym $mod+Shift+9 move container to workspace $ws9
  bindsym $mod+Shift+0 move container to workspace $ws0

  # Move container and focus to workspace
  bindsym $mod+Control+1 move container to workspace $ws1, workspace $ws1
  bindsym $mod+Control+2 move container to workspace $ws2, workspace $ws2
  bindsym $mod+Control+3 move container to workspace $ws3, workspace $ws3
  bindsym $mod+Control+4 move container to workspace $ws4, workspace $ws4
  bindsym $mod+Control+5 move container to workspace $ws5, workspace $ws5
  bindsym $mod+Control+6 move container to workspace $ws6, workspace $ws6
  bindsym $mod+Control+7 move container to workspace $ws7, workspace $ws7
  bindsym $mod+Control+8 move container to workspace $ws8, workspace $ws8
  bindsym $mod+Control+9 move container to workspace $ws9, workspace $ws9
  bindsym $mod+Control+0 move container to workspace $ws0, workspace $ws0

  # Moving back and forth between the last workspace
  workspace_auto_back_and_forth yes
  bindsym $mod+Tab workspace back_and_forth
  bindsym $mod+Shift+Tab move container to workspace back_and_forth; workspace back_and_forth

  # }}}


# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

set $mode_system ÔÄ£[L]OCK       ÔÇãLOG[O]UT       Ôäã[S]USPEND       Óúâ[H]IBERNATE      ÔÄ°[R]EBOOT       ÔÄë[P]OWEROFF
bindsym $alt+Delete mode "$mode_system"
mode "$mode_system" {
    bindsym l exec --no-startup-id $SCRIPTDIR/exit lock, mode "default"
    bindsym o exec --no-startup-id $SCRIPTDIR/exit logout, mode "default"
    bindsym s exec --no-startup-id $SCRIPTDIR/exit suspend, mode "default"
    bindsym h exec --no-startup-id $SCRIPTDIR/exit hibernate, mode "default"
    bindsym r exec --no-startup-id $SCRIPTDIR/exit reboot, mode "default"
    bindsym p exec --no-startup-id $SCRIPTDIR/exit poweroff, mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Function keys For ThinkPad t450s

bindsym XF86AudioMute exec "amixer -q -D pulse set Master toggle"
bindsym XF86AudioLowerVolume exec "amixer -c 0 -D pulse sset Master 5%- unmute"
bindsym XF86AudioRaiseVolume exec "amixer -c 0 -D pulse sset Master 5%+ unmute"
bindsym XF86AudioMicMute exec "amixer -c 0 -D pulse set Capture toggle"

# pause / play / next / previous
#bindsym XF86AudioPlay exec playerctl play-pause
#bindsym XF86AudioNext exec playerctl next
#bindsym XF86AudioPrev exec playerctl previous

# Sreen brightness controls
bindsym XF86MonBrightnessUp exec --no-startup-id $SCRIPTDIR/light.sh up 5
bindsym XF86MonBrightnessDown exec --no-startup-id $SCRIPTDIR/light.sh down 5
# XF86HomePage XF86Mail XF86Favorites XF86Calculator
# start dmenu (a program launcher) rofi

bindsym XF86LaunchA exec --no-startup-id rofi -show run
bindsym XF86Search exec --no-startup-id i3-dmenu-desktop --dmenu='rofi -dmenu'
#application list
bindsym XF86Explorer exec --no-startup-id morc_menu

#pc
#bindsym XF86Calculator exec --no-startup-id rofi -show run

#bindsym XF86Sleep exec xterm-tabbed.sh
bindsym XF86Wakeup exec galculator
#bindsym Home exec --no-startup-id rofi -modi "clipboard:greenclip print" -show clipboard -run-command '{cmd}'
# launch categorized menu
# /home/turbo/.local/share/applications desktop ÈÖçÁΩÆÁõÆÂΩï
#bindsym --release Print exec flameshot gui -p ~/Pictures/scrot
bindsym --release Print exec deepin-screenshot -s ~/Pictures/scrot

#XF86WLAN
#bindsym XF86Tools exec hp-printsettings
bindsym XF86Tools exec galculator
# Enter normal mode
bindsym Insert mode "normal"
#bindsym XF86Calculator exec xcalc
# Emergency: Turn off builtin display
# (Sometimes the display is active but still dead after waking up from suspend)
# Emergency: Turn on all connected displays
bindsym XF86Display exec --no-startup-id "$SCRIPTDIR/ext_screen.sh"


# }}}

# Window handling {{{
# Floating
for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable
for_window [window_role="dialog"] floating enable
for_window [window_role="menu"] floating enable
for_window [window_role="About"] floating enable
for_window [window_role="app"] floating enable

for_window [class="Urxvt|Termite|XCalc|XFontSel"] floating enable, border none
for_window [class="Remarkable|V2Ray-Desktop|shadowsocks-qt5|wicd-client.py|Wicd Network Manager"] floating enable, border none
for_window [class="Google-chrome|Chromium|jetbrains-idea"] border none,tabbed enable,stacking
for_window [class="Ddd" instance="^(?!command_shell$)"] floating enable
#for_window [class=""] focus child, layout split, focus
for_window [class="XClipboard|Blueman-manager|Lxappearance|Netease-cloud-music-gtk"] floating enable
for_window [class="SimpleScreenRecorder|vokoscreenNG|Zeal|Remmina|Evince|Typora"] floating enable, border none
for_window [class="feh|xpad|Vimiv|Clementine|gl|mpv|xev"] floating enable, border none
for_window [class="Terminator"] border none
for_window [class="Galculator|XTerm|tabbed|Osmo|Hexchat|Min"] floating enable border pixel 1

for_window [class="Org.gnome.Nautilus|Zotero|Mailspring|VirtualBox Manager|RSS Guard"] border none,tabbed enable,stacking
#cssh
for_window [class="Cssh|kate|Mousepad|Geany|ReText|Amule|Transmission-gtk|ark"] floating enable
for_window [title="^CLUSTERSSH: .*"] floating enable
for_window [class="DialogBox"] floating enable

# switch to workspace with urgent window automatically
for_window [urgent=latest] focus

# always open some programs on specified workspace
#assign [class="Terminator|Remmina"]  $ws1
assign [class="qutebrowser|rage|Org.gnome.Nautilus|GitKraken"]  $ws2
assign [class="Chromium|Google-chrome"]  $ws3
assign [class="Code"]  $ws4

assign [class="jetbrains-idea"]  $ws5
assign [class="TelegramDesktop|Pcmanfm"] $ws0
assign [class="VirtualBox Manager|RSS Guard|Zotero|Mailspring|Navicat.exe"] $ws9
# }}}


# Everything else in a vim like normal mode {{{
mode "normal" {
  # Splits and layout {{{
    # Split in horizontal orientation
    bindsym s split v
    # Split in vertical orientation
    bindsym v split h

    # Focus the parent container
    bindsym p focus parent
    # Focus the child container
    bindsym n focus child

  #}}}

  # back to default : Home or Enter or Escape
  bindsym Home mode "default"
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
# }}}

# {{{ resize window (you can also use the mouse for that)
set $mode_resize ‚òØ
bindsym $alt+r mode "$mode_resize"

mode "resize" {
        # These bindings trigger as soon as you enter the resize mode
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to default : Home or Enter or Escape
        bindsym Home mode "default"
        bindsym Return mode "default"
        bindsym Escape mode "default"

}
# }}}

#{{{ move floating windows with keys
set $mode_move Ôâï
bindsym $alt+m mode "$mode_move" focus floating
mode "$mode_move" {
    bindsym $alt+Tab focus right

    bindsym Left  move left
    bindsym Down  move down
    bindsym Up    move up
    bindsym Right move right

    bindsym h     move left
    bindsym j     move down
    bindsym k     move up
    bindsym l     move right

    # back to default : Home or Enter or Escape
    bindsym Home mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# }}}

# Statusbar {{{
# show CapsLock state in statusbar
set $mode_caps ÔÄ±
bindsym Caps_Lock mode "$mode_caps"
mode "$mode_caps" {
    bindsym Caps_Lock mode "default"
}

bar {
    position bottom
	  tray_output primary
    output eDP1
    status_command i3blocks -c $HOME/.config/i3/i3blocks.conf
    #status_command i3status
    font pango: Sauce Code Pro Nerd Font Mono 8
    colors {
        background         #2f343f
        #statusbar colors  border   background  text
        focused_workspace  #1B2B34FF #1B2B34FF #D8DEE9
        active_workspace   #1B2B34FF #1B2B34FF #A7ADBA
        inactive_workspace #1B2B34FF #1B2B34FF #848D98
        urgent_workspace   #1B2B34FF #1B2B34FF #FAC863
        binding_mode       #1B2B34FF #1B2B34FF #FAC863
    }
}
# }}}

#{{{ auto start
exec --no-startup-id /usr/bin/compton -bcf -i 0.95
exec --no-startup-id /usr/bin/urxvtd -q -f -o
exec --no-startup-id $SCRIPTDIR/wallpaper &
exec --no-startup-id xautolock -time 5 -locker $SCRIPTDIR/exit lock &
exec --no-startup-id /usr/bin/volumeicon
exec --no-startup-id nm-applet
exec --no-startup-id /usr/bin/copyq
#exec --no-startup-id ibus-daemon -xrd
exec --no-startup-id /usr/bin/blueman-applet
#exec --no-startup-id /usr/bin/mpd ~/.config/mpd/mpd.conf
#localectl set-x11-keymap us pc105 ,us caps:ctrl_modifier
exec --no-startup-id /usr/bin/xmodmap ~/.config/i3/Xmodmaprc
#exec_always --no-startup-id ff-theme-util
exec_always --no-startup-id fix_xcursor
exec --no-startup-id "sh -c 'sleep 1; exec libinput-gestures-setup start'"
exec --no-startup-id "sh -c 'sleep 2; exec urxvtc -e tmux'"
#exec --no-startup-id "sh -c 'sleep 2; exec screenkey'"
exec --no-startup-id /usr/bin/terminator --layout=box
exec --no-startup-id "sh -c 'sleep 5; exec /usr/bin/terminator --layout=box --new-tab'"
exec --no-startup-id "sh -c 'sleep 5; exec xpad'"
#exec --no-startup-id "sh -c 'sleep 10; exec ss-qt5'"
#exec --no-startup-id "sh -c 'sleep 12; exec hexchat'"
exec --no-startup-id "sh -c 'sleep 6; exec qutebrowser'"
#exec --no-startup-id "sh -c 'sleep 18; exec gitkraken'"
#exec --no-startup-id "sh -c 'sleep 20; exec nautilus'"
exec --no-startup-id "sh -c 'sleep 7; exec pcmanfm'"
exec --no-startup-id "sh -c 'sleep 8; exec virtualbox'"
#exec --no-startup-id "sh -c 'sleep 25; exec rssguard'"
#exec --no-startup-id "sh -c 'sleep 25; exec mailspring'"
#exec --no-startup-id "sh -c 'sleep 25; exec transmission-gtk'"
#exec --no-startup-id "sh -c 'sleep 25; exec amule'"
exec --no-startup-id "sh -c 'sleep 9; exec osmo'"
exec --no-startup-id "sh -c 'sleep 9; exec zotero'"

exec --no-startup-id "sh -c 'sleep 10; exec chromium'"
exec --no-startup-id "sh -c 'sleep 11; exec google-chrome-stable'"

# }}}
